<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cafe Kawaii Recipes</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@700&family=Pacifico&family=Kosugi+Maru&family=Baloo+2:wght@700&display=swap" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(135deg, #fffaf6 80%, #f7e7ce 100%);
      font-family: 'Quicksand', 'Baloo 2', 'Kosugi Maru', Arial, sans-serif;
      color: #6d4c41;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    /* Cafe Awning Header */
    .header-bar {
      background: repeating-linear-gradient(90deg, #ffe0ec 0 40px, #fff 40px 80px);
      border-bottom: 6px solid #e0bfae;
      box-shadow: 0 4px 16px #f8bbd0;
      padding: 0 0 18px 0;
      position: relative;
      z-index: 2;
    }
    .header-content {
      text-align: center;
      padding-top: 32px;
    }
    .header-content h1 {
      font-family: 'Pacifico', 'Baloo 2', cursive;
      font-size: 2.5rem;
      color: #e57373;
      margin: 0;
      letter-spacing: 2px;
      text-shadow: 1px 2px 0 #fff;
    }
    .header-content .subheader {
      font-family: 'Kosugi Maru', 'Quicksand', Arial, sans-serif;
      font-size: 1.2rem;
      color: #7e5a3a;
      margin-top: 6px;
      margin-bottom: 0;
    }
    /* Navigation */
    .nav {
      display: flex;
      justify-content: center;
      gap: 32px;
      background: #f7e7ce;
      border-bottom: 2px solid #e0bfae;
      padding: 12px 0 8px 0;
      font-family: 'Baloo 2', 'Kosugi Maru', Arial, sans-serif;
      font-size: 1.1rem;
    }
    .nav-tab {
      display: flex;
      align-items: center;
      gap: 8px;
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 2px 8px #f8bbd0;
      padding: 8px 22px;
      cursor: pointer;
      transition: background 0.2s, box-shadow 0.2s;
      border: none;
      outline: none;
      font-weight: bold;
    }
    .nav-tab:hover {
      background: #ffe0ec;
      box-shadow: 0 4px 16px #f8bbd0;
    }
    .nav-icon {
      font-size: 1.3rem;
    }
    /* Main Section */
    .main-section {
      max-width: 1100px;
      margin: 36px auto 0 auto;
      background: #fff;
      border-radius: 24px;
      box-shadow: 0 4px 24px #f8bbd0;
      padding: 32px 24px 32px 24px;
      position: relative;
      z-index: 1;
    }
    .main-title {
      font-family: 'Baloo 2', 'Pacifico', cursive;
      font-size: 1.7rem;
      color: #a67c52;
      margin: 0 0 8px 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .main-title .bracket {
      color: #e57373;
      font-size: 2rem;
      font-family: 'Pacifico', cursive;
    }
    .main-desc {
      font-size: 1.1rem;
      color: #7e5a3a;
      margin-bottom: 18px;
    }
    .status-row {
      display: flex;
      align-items: center;
      gap: 18px;
      margin-bottom: 18px;
    }
    .status-bubble {
      background: #b2f2bb;
      color: #388e3c;
      border-radius: 16px;
      padding: 4px 18px;
      font-weight: bold;
      font-size: 1rem;
      box-shadow: 0 2px 8px #c8e6c9;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .status-bubble .dot {
      width: 10px;
      height: 10px;
      background: #69f0ae;
      border-radius: 50%;
      display: inline-block;
    }
    .last-updated {
      color: #a67c52;
      font-size: 0.98rem;
      font-family: 'Kosugi Maru', Arial, sans-serif;
    }
    /* Content Columns */
    .content-columns {
      display: flex;
      gap: 32px;
      margin-top: 18px;
      flex-wrap: wrap;
    }
    .left-col, .right-col {
      flex: 1 1 320px;
      min-width: 320px;
    }
    /* Food Image Cards */
    .food-cards {
      display: flex;
      gap: 16px;
      margin-bottom: 18px;
    }
    .food-card {
      background: #fff0f6;
      border-radius: 16px;
      box-shadow: 0 2px 8px #f8bbd0;
      width: 90px;
      height: 90px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
    }
    .food-card img {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 50%;
      border: 2px solid #ffe0ec;
      background: #fff;
    }
    /* Round Buttons */
    .round-buttons {
      display: flex;
      gap: 12px;
      margin-bottom: 18px;
    }
    .round-btn {
      background: #ffe0ec;
      border: none;
      border-radius: 50%;
      width: 54px;
      height: 54px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: #d81b60;
      box-shadow: 0 2px 8px #f8bbd0;
      cursor: pointer;
      transition: background 0.2s, box-shadow 0.2s;
    }
    .round-btn:hover {
      background: #f8bbd0;
      box-shadow: 0 4px 16px #f8bbd0;
    }
    /* Featured Recipe Box */
    .featured-box {
      background: #f7e7ce;
      border-radius: 18px;
      box-shadow: 0 2px 8px #ffe0ec;
      padding: 18px 18px 14px 18px;
      margin-bottom: 18px;
      font-family: 'Kosugi Maru', Arial, sans-serif;
      position: relative;
    }
    .featured-box .icon {
      background: #b2f2bb;
      color: #388e3c;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      position: absolute;
      top: -16px;
      left: -16px;
      box-shadow: 0 2px 8px #c8e6c9;
    }
    /* Kawaii Figurine */
    .kawaii-fig {
      background: #e0f7fa;
      border-radius: 18px;
      box-shadow: 0 2px 8px #b2ebf2;
      padding: 18px 0 10px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 18px;
    }
    .kawaii-fig img {
      width: 120px;
      height: 90px;
      object-fit: contain;
      border-radius: 12px;
      background: #fff;
      border: 2px solid #b2ebf2;
    }
    /* Info Box */
    .info-box {
      background: #fffde7;
      border-radius: 16px;
      box-shadow: 0 2px 8px #ffe082;
      padding: 16px 18px 10px 18px;
      font-family: 'Kosugi Maru', Arial, sans-serif;
      margin-bottom: 18px;
      position: relative;
    }
    .info-box .warning {
      background: #fff59d;
      color: #bfa100;
      border-radius: 10px;
      padding: 4px 10px;
      font-size: 0.98rem;
      margin-bottom: 8px;
      display: inline-block;
      font-weight: bold;
    }
    @media (max-width: 900px) {
      .main-section { padding: 18px 2vw; }
      .content-columns { flex-direction: column; gap: 18px; }
    }
    @media (max-width: 600px) {
      body {
        font-size: 15px;
        padding: 0;
      }
      .main-section {
        padding: 4vw 2vw 2vw 2vw;
        border-radius: 10px;
        margin: 10px 0 0 0;
        box-shadow: 0 2px 8px #f8bbd0;
      }
      .main-title {
        font-size: 1.1rem;
        flex-direction: column;
        gap: 2px;
        text-align: center;
      }
      .main-desc {
        font-size: 1rem;
        text-align: center;
        margin-bottom: 10px;
      }
      .status-row {
        flex-direction: column;
        gap: 6px;
        align-items: flex-start;
      }
      .content-columns {
        flex-direction: column;
        gap: 10px;
      }
      .left-col, .right-col {
        min-width: 0;
        width: 100%;
        padding: 0;
      }
      .food-cards {
        flex-direction: row;
        gap: 6px;
        justify-content: center;
        margin-bottom: 10px;
      }
      .food-card {
        width: 54px;
        height: 54px;
      }
      .food-card img {
        width: 48px;
        height: 48px;
      }
      .round-buttons {
        flex-direction: row;
        gap: 6px;
        margin-bottom: 8px;
        justify-content: center;
      }
      .round-btn {
        width: 38px;
        height: 38px;
        font-size: 1rem;
      }
      .featured-box {
        padding: 8px 4px 8px 4px;
        border-radius: 8px;
        font-size: 0.95rem;
        margin-bottom: 10px;
      }
      .featured-box .icon {
        width: 20px;
        height: 20px;
        font-size: 0.9rem;
        top: -8px;
        left: -8px;
      }
      .kawaii-fig {
        padding: 8px 0 6px 0;
        border-radius: 8px;
        margin-bottom: 10px;
      }
      .kawaii-fig img {
        width: 60px;
        height: 44px;
      }
      .info-box {
        padding: 8px 4px 6px 4px;
        border-radius: 8px;
        font-size: 0.95rem;
        margin-bottom: 10px;
      }
      #saveEditsBtn, #bgmToggleBtn {
        width: 38px !important;
        height: 38px !important;
        font-size: 1rem !important;
        bottom: 10px !important;
        right: 10px !important;
        left: 10px !important;
      }
      #addRecipeBtn, #editModeBtn {
        padding: 2px 6px;
        font-size: 0.9rem;
        top: 4px;
        right: 4px;
      }
      #addRecipeForm, #editModePopup {
        padding: 8px 2vw;
        max-width: 99vw;
      }
      .kawaii-comments-box {
        padding: 6px 2px 6px 2px;
        border-radius: 8px;
      }
      #commentsList {
        max-height: 70px;
        font-size: 0.93rem;
      }
      input, textarea, button {
        font-size: 1em !important;
      }
      form input, form textarea {
        padding: 6px 6px;
      }
    }
  </style>
</head>
<body>
  <div class="header-bar">
    <div class="header-content">
      <h1>Welcome to callys.room!</h1>
      <div class="subheader">A cozy space for sharing cute recipes, plushie vibes, and sweet inspiration! (｡•ᴗ•｡)♡</div>
    </div>
  </div>
  <nav class="nav">
    <button class="nav-tab"><span class="nav-icon">🏠</span> one</button>
    <button class="nav-tab"><span class="nav-icon">📋</span> two</button>
    <button class="nav-tab"><span class="nav-icon">✉️</span> three</button>
  </nav>
  <div class="main-section">
    <div class="main-title"><span class="bracket">[</span> home + about <span class="bracket">]</span></div>
    <div class="main-desc">Have a look around! DM @user for any questions.</div>
    <div class="status-row">
      <div class="status-bubble"><span class="dot"></span> status: OPEN</div>
      <div class="last-updated">last updated: 06/11/25</div>
    </div>
    <div class="content-columns">
      <div class="left-col">
        <div class="food-cards">
          <div class="food-card"><img src="https://img.freepik.com/free-photo/japanese-melon-pan-bread_1150-11012.jpg?w=400&q=80" alt="Melonpan" class="changeable-img"></div>
          <div class="food-card"><img src="https://img.freepik.com/free-photo/variety-bakery-breads_1150-11010.jpg?w=400&q=80" alt="Bakery" class="changeable-img"></div>
          <div class="food-card"><img src="https://img.freepik.com/free-photo/close-up-sweet-bread_1150-11011.jpg?w=400&q=80" alt="Sweet Bread" class="changeable-img"></div>
        </div>
        <input type="file" id="imgInput" accept="image/*" style="display:none">
        <button id="editModeBtn" style="position:absolute; top:10px; right:20px; z-index:10; background:#ffe0ec; color:#d81b60; border:none; border-radius:8px; padding:6px 16px; font-size:1rem; font-family:'Baloo 2',cursive; cursor:pointer; box-shadow:0 2px 8px #f8bbd0;">Edit Mode</button>
        <button id="addRecipeBtn" style="display:none; position:absolute; top:50px; right:20px; z-index:10; background:#b2f2bb; color:#388e3c; border:none; border-radius:8px; padding:6px 16px; font-size:1rem; font-family:'Baloo 2',cursive; cursor:pointer; box-shadow:0 2px 8px #c8e6c9;">Add Recipe</button>
        <div id="addRecipeFormWrap" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(255,250,246,0.95); z-index:1000; align-items:center; justify-content:center;">
          <form id="addRecipeForm" style="background:#fff; border-radius:18px; box-shadow:0 4px 24px #f8bbd0; padding:24px 32px; max-width:400px; width:90vw; display:flex; flex-direction:column; gap:12px;">
            <h2 style="font-family:'Pacifico',cursive; color:#e57373; margin:0 0 8px 0;">Add Cute Recipe</h2>
            <input type="text" id="recipeTitle" placeholder="Recipe Title" required style="padding:8px; border-radius:8px; border:1px solid #ffe0ec;">
            <input type="text" id="recipeDesc" placeholder="Short Description" required style="padding:8px; border-radius:8px; border:1px solid #ffe0ec;">
            <textarea id="recipeIngredients" placeholder="Ingredients (one per line)" required style="padding:8px; border-radius:8px; border:1px solid #ffe0ec; min-height:60px;"></textarea>
            <textarea id="recipeSteps" placeholder="Steps (one per line)" required style="padding:8px; border-radius:8px; border:1px solid #ffe0ec; min-height:60px;"></textarea>
            <input type="text" id="recipeTip" placeholder="Kawaii Tip (optional)" style="padding:8px; border-radius:8px; border:1px solid #ffe0ec;">
            <div style="display:flex; gap:8px; justify-content:flex-end;">
              <button type="button" id="cancelAddRecipe" style="background:#ffe0ec; color:#d81b60; border:none; border-radius:8px; padding:6px 16px; font-family:'Baloo 2',cursive; cursor:pointer;">Cancel</button>
              <button type="submit" style="background:#b2f2bb; color:#388e3c; border:none; border-radius:8px; padding:6px 16px; font-family:'Baloo 2',cursive; cursor:pointer;">Add</button>
            </div>
          </form>
        </div>
        <div id="editModePopupWrap" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(255,250,246,0.92); z-index:2000; align-items:center; justify-content:center;">
          <form id="editModePopup" style="background:#fff0f6; border-radius:18px; box-shadow:0 4px 24px #f8bbd0; padding:32px 36px; max-width:340px; width:90vw; display:flex; flex-direction:column; gap:16px; align-items:center;">
            <div style="font-family:'Pacifico',cursive; color:#e57373; font-size:1.5rem;">Enter Edit Mode</div>
            <div style="color:#a67c52; font-size:1.05rem; text-align:center;">Please enter your secret password to unlock <b>edit mode</b>!<br><span style="font-size:1.5rem;">🔒✨</span></div>
            <input id="editModePassword" type="password" placeholder="Password" required style="padding:8px; border-radius:8px; border:1px solid #ffe0ec; font-size:1.1rem; width:100%;">
            <div style="display:flex; gap:10px; width:100%; justify-content:flex-end;">
              <button type="button" id="cancelEditModePopup" style="background:#ffe0ec; color:#d81b60; border:none; border-radius:8px; padding:6px 16px; font-family:'Baloo 2',cursive; cursor:pointer;">Cancel</button>
              <button type="submit" style="background:#b2f2bb; color:#388e3c; border:none; border-radius:8px; padding:6px 16px; font-family:'Baloo 2',cursive; cursor:pointer;">Enter</button>
            </div>
          </form>
        </div>
        <button id="saveEditsBtn" style="display:none; position:fixed; bottom:32px; right:32px; z-index:3000; background:#ffe0ec; color:#d81b60; border:none; border-radius:50%; width:64px; height:64px; box-shadow:0 4px 16px #f8bbd0; font-size:2rem; font-family:'Pacifico',cursive; cursor:pointer; align-items:center; justify-content:center; display:flex;">
          💾
        </button>
        <iframe id="bgm-yt" width="0" height="0" style="position:fixed; left:-9999px;" src="https://www.youtube.com/embed/7PvYu-1iEbY?autoplay=1&loop=1&playlist=7PvYu-1iEbY&controls=0&showinfo=0&modestbranding=1&rel=0&mute=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        <button id="bgmToggleBtn" style="position:fixed; bottom:32px; left:32px; z-index:3000; background:#fffde7; color:#bfa100; border:none; border-radius:50%; width:54px; height:54px; box-shadow:0 2px 8px #ffe082; font-size:1.5rem; font-family:'Pacifico',cursive; cursor:pointer; display:flex; align-items:center; justify-content:center;">🎵</button>
        <script>
          // --- Edit Mode Protection ---
          let editMode = false;
          let editModeUnlocked = false;
          const editModeBtn = document.getElementById('editModeBtn');
          const imgInput = document.getElementById('imgInput');
          let currentImg = null;
          // Hide file input and disable image changing by default
          function setEditMode(enabled) {
            editMode = enabled;
            if (enabled) {
              imgInput.style.display = 'none';
              document.querySelectorAll('.changeable-img').forEach(img => {
                img.style.cursor = 'pointer';
                img.title = 'Click to change image';
                img.onclick = function() {
                  currentImg = img;
                  imgInput.click();
                };
              });
              enableEditModeUI();
              showSaveBtn();
            } else {
              imgInput.style.display = 'none';
              document.querySelectorAll('.changeable-img').forEach(img => {
                img.style.cursor = 'not-allowed';
                img.title = 'Image editing disabled';
                img.onclick = null;
              });
              disableEditModeUI();
              hideSaveBtn();
            }
          }
          // Only ask for password once per session
          editModeBtn.addEventListener('click', function() {
            if (editModeUnlocked) {
              setEditMode(true);
              alert('Edit mode enabled!');
              return;
            }
            editModePopupWrap.style.display = 'flex';
            editModePassword.value = '';
            editModePassword.focus();
          });
          cancelEditModePopup.onclick = function() {
            editModePopupWrap.style.display = 'none';
            editModePassword.value = '';
          };
          editModePopup.onsubmit = function(e) {
            e.preventDefault();
            if (editModePassword.value === 'kawaii2025') {
              editModeUnlocked = true;
              setEditMode(true);
              editModePopupWrap.style.display = 'none';
              alert('Edit mode enabled!');
            } else {
              editModePassword.value = '';
              editModePassword.placeholder = 'Wrong password! Try again.';
              editModePassword.style.borderColor = '#e57373';
              setTimeout(()=>{
                editModePassword.placeholder = 'Password';
                editModePassword.style.borderColor = '#ffe0ec';
              }, 1200);
            }
          };
          imgInput.addEventListener('change', function(e) {
            if (editMode && currentImg && e.target.files && e.target.files[0]) {
              const reader = new FileReader();
              reader.onload = function(ev) {
                currentImg.src = ev.target.result;
              };
              reader.readAsDataURL(e.target.files[0]);
            }
          });
          // --- Add Recipe Feature ---
          const addRecipeBtn = document.getElementById('addRecipeBtn');
          const addRecipeFormWrap = document.getElementById('addRecipeFormWrap');
          const addRecipeForm = document.getElementById('addRecipeForm');
          const cancelAddRecipe = document.getElementById('cancelAddRecipe');
          // Show Add Recipe button only in edit mode
          function enableEditModeUI() {
            addRecipeBtn.style.display = 'block';
          }
          function disableEditModeUI() {
            addRecipeBtn.style.display = 'none';
          }
          // Patch edit mode activation to show/hide add recipe button
          const origEditModeBtnClick = editModeBtn.onclick || editModeBtn.addEventListener;
          editModeBtn.onclick = function() {
            const pwd = prompt('Enter password to enable edit mode:');
            if (pwd === 'kawaii2025') {
              editMode = true;
              imgInput.style.display = 'none';
              document.querySelectorAll('.changeable-img').forEach(img => {
                img.style.cursor = 'pointer';
                img.title = 'Click to change image';
                img.onclick = function() {
                  currentImg = img;
                  imgInput.click();
                };
              });
              enableEditModeUI();
              alert('Edit mode enabled! You can now change images and add recipes.');
            } else {
              alert('Incorrect password.');
              disableEditModeUI();
            }
          };
          // Add Recipe button click
          addRecipeBtn.onclick = function() {
            addRecipeFormWrap.style.display = 'flex';
          };
          cancelAddRecipe.onclick = function() {
            addRecipeFormWrap.style.display = 'none';
            addRecipeForm.reset();
          };
          // Cute icons and emoticons for randomization
          const cuteIcons = ['🍓','🍞','🍜','🥕','🍵','🥢','🧁','🍰','🥯','🥚','🍩','🍪','🍙','🍡','🍧','🍦'];
          const kawaiiEmotes = [
            '(｡•ᴗ•｡)♡','(≧◡≦)','(ﾉ◕ヮ◕)ﾉ*:･ﾟ✧','(✿◕‿◕✿)','(´｡• ᵕ •｡`)','(｡♥‿♥｡)','(っ˘ω˘ς )','(づ｡◕‿‿◕｡)づ','(๑˃ᴗ˂)ﻭ','(๑˃̵ᴗ˂̵)','(๑•ᴗ•๑)♡','(｡•̀ᴗ-)✧'
          ];
          // Add Recipe form submit
          addRecipeForm.onsubmit = function(e) {
            e.preventDefault();
            const title = document.getElementById('recipeTitle').value.trim();
            const desc = document.getElementById('recipeDesc').value.trim();
            const ingredients = document.getElementById('recipeIngredients').value.trim().split(/\n|\r/).filter(Boolean);
            const steps = document.getElementById('recipeSteps').value.trim().split(/\n|\r/).filter(Boolean);
            let tip = document.getElementById('recipeTip').value.trim();
            // Pick random icon and emote if not provided
            const icon = cuteIcons[Math.floor(Math.random()*cuteIcons.length)];
            if (!tip) tip = 'Kawaii tip: Sajikan dengan senyum dan cinta! ' + kawaiiEmotes[Math.floor(Math.random()*kawaiiEmotes.length)];
            // Build recipe box
            const box = document.createElement('div');
            box.className = 'featured-box';
            box.style.background = ['#ffe0ec','#e0f7fa','#fffde7','#f3e8ff'][Math.floor(Math.random()*4)];
            box.innerHTML = `
              <div class="icon">${icon}</div>
              <div style="font-weight:bold; font-size:1.1rem;">${title}</div>
              <div style="color:#a67c52; font-size:0.98rem;">${desc}</div>
              <div style="margin-top:8px; background:#fff; border-radius:10px; padding:10px 12px; box-shadow:0 1px 4px #ffe0ec; font-size:0.97rem;">
                <b>Ingredients:</b><br>
                <ul style="margin:6px 0 8px 18px;">${ingredients.map(i=>`<li>${i}</li>`).join('')}</ul>
                <b>Steps:</b><br>
                <ol style="margin:6px 0 8px 18px;">${steps.map(s=>`<li>${s}</li>`).join('')}</ol>
                <span style="color:#d81b60; font-size:1.1em;">${tip}</span>
              </div>
            `;
            // Insert after last .featured-box or at end of .main-section
            const lastBox = document.querySelector('.main-section .featured-box:last-of-type');
            if (lastBox) lastBox.parentNode.insertBefore(box, lastBox.nextSibling);
            else document.querySelector('.main-section').appendChild(box);
            addRecipeFormWrap.style.display = 'none';
            addRecipeForm.reset();
            window.scrollTo({top: box.offsetTop-40, behavior:'smooth'});
          };
          // --- Edit Recipe Feature ---
          function enableEditButtons() {
            document.querySelectorAll('.main-section .featured-box').forEach(box => {
              if (box.querySelector('.edit-recipe-btn')) return; // Already has edit button
              const editBtn = document.createElement('button');
              editBtn.textContent = 'Edit';
              editBtn.className = 'edit-recipe-btn';
              editBtn.style = 'position:absolute; top:10px; right:10px; background:#ffe0ec; color:#d81b60; border:none; border-radius:8px; padding:4px 12px; font-size:0.95rem; font-family:Baloo 2,cursive; cursor:pointer; box-shadow:0 2px 8px #f8bbd0; z-index:2;';
              editBtn.onclick = function(e) {
                e.stopPropagation();
                // Parse current recipe details
                const icon = box.querySelector('.icon')?.textContent || '';
                const title = box.querySelector('div[style*="font-weight:bold"]')?.textContent || '';
                const desc = box.querySelector('div[style*="color:#a67c52"]')?.textContent || '';
                const ingredients = Array.from(box.querySelectorAll('ul li')).map(li=>li.textContent).join('\n');
                const steps = Array.from(box.querySelectorAll('ol li')).map(li=>li.textContent).join('\n');
                const tip = box.querySelector('span[style*="color:#d81b60"]')?.textContent || '';
                // Fill form
                document.getElementById('recipeTitle').value = title;
                document.getElementById('recipeDesc').value = desc;
                document.getElementById('recipeIngredients').value = ingredients;
                document.getElementById('recipeSteps').value = steps;
                document.getElementById('recipeTip').value = tip.replace(/^Kawaii tip: /i, '');
                addRecipeFormWrap.style.display = 'flex';
                // On submit, update this box
                addRecipeForm.onsubmit = function(ev) {
                  ev.preventDefault();
                  const newTitle = document.getElementById('recipeTitle').value.trim();
                  const newDesc = document.getElementById('recipeDesc').value.trim();
                  const newIngredients = document.getElementById('recipeIngredients').value.trim().split(/\n|\r/).filter(Boolean);
                  const newSteps = document.getElementById('recipeSteps').value.trim().split(/\n|\r/).filter(Boolean);
                  let newTip = document.getElementById('recipeTip').value.trim();
                  if (!newTip) newTip = 'Kawaii tip: Sajikan dengan senyum dan cinta! (｡•ᴗ•｡)♡';
                  else if (!/^Kawaii tip:/i.test(newTip)) newTip = 'Kawaii tip: ' + newTip;
                  // Keep the same icon and box color
                  box.querySelector('.icon').textContent = icon;
                  box.querySelector('div[style*="font-weight:bold"]').textContent = newTitle;
                  box.querySelector('div[style*="color:#a67c52"]').textContent = newDesc;
                  box.querySelector('ul').innerHTML = newIngredients.map(i=>`<li>${i}</li>`).join('');
                  box.querySelector('ol').innerHTML = newSteps.map(s=>`<li>${s}</li>`).join('');
                  box.querySelector('span[style*="color:#d81b60"]')?.replaceWith((()=>{
                    const span = document.createElement('span');
                    span.style = 'color:#d81b60; font-size:1.1em;';
                    span.textContent = newTip;
                    return span;
                  })());
                  addRecipeFormWrap.style.display = 'none';
                  addRecipeForm.reset();
                };
              };
              box.style.position = 'relative';
              box.appendChild(editBtn);
            });
          }
          // Patch edit mode activation to enable edit buttons
          function enableEditModeUI() {
            addRecipeBtn.style.display = 'block';
            enableEditButtons();
            enableInfoBoxEdit();
          }
          function disableEditModeUI() {
            addRecipeBtn.style.display = 'none';
            document.querySelectorAll('.edit-recipe-btn').forEach(btn=>btn.remove());
            document.querySelectorAll('.edit-info-btn').forEach(btn=>btn.remove());
          }
          // --- Editable Info Box Title & Subheader & Custom Text ---
          function enableInfoBoxEdit() {
            const infoBox = document.querySelector('.info-box');
            if (!infoBox) return;
            const titleDiv = infoBox.querySelector('div[style*="font-weight:bold"]');
            const subDiv = infoBox.querySelector('div[style*="color:#a67c52"]');
            const warningDiv = infoBox.querySelector('.warning');
            const customTextDiv = document.getElementById('infoBoxCustomText');
            if (!titleDiv || !subDiv || !warningDiv || !customTextDiv) return;
            // Add edit button if not already present
            if (!infoBox.querySelector('.edit-info-btn')) {
              const editBtn = document.createElement('button');
              editBtn.textContent = 'Edit';
              editBtn.className = 'edit-info-btn';
              editBtn.style = 'position:absolute; top:10px; right:10px; background:#ffe0ec; color:#d81b60; border:none; border-radius:8px; padding:4px 12px; font-size:0.95rem; font-family:Baloo 2,cursive; cursor:pointer; box-shadow:0 2px 8px #f8bbd0; z-index:2;';
              editBtn.onclick = function(e) {
                e.stopPropagation();
                const newTitle = prompt('Edit info box title:', titleDiv.textContent);
                if (newTitle !== null) titleDiv.textContent = newTitle;
                const newSub = prompt('Edit info box subheader:', subDiv.textContent);
                if (newSub !== null) subDiv.textContent = newSub;
                const newWarning = prompt('Edit info box warning:', warningDiv.textContent);
                if (newWarning !== null) warningDiv.textContent = newWarning;
                const newCustom = prompt('Edit info box custom text:', customTextDiv.textContent);
                if (newCustom !== null) customTextDiv.textContent = newCustom;
              };
              infoBox.style.position = 'relative';
              infoBox.appendChild(editBtn);
            }
          }
          // --- Cute Save Button for Edits ---
          const saveEditsBtn = document.getElementById('saveEditsBtn');
          let editsPending = false;
          // Show save button in edit mode
          function showSaveBtn() {
            saveEditsBtn.style.display = 'flex';
          }
          function hideSaveBtn() {
            saveEditsBtn.style.display = 'none';
          }
          // Listen for contenteditable changes
          document.addEventListener('input', function(e) {
            if (editMode && e.target.isContentEditable) {
              editsPending = true;
              showSaveBtn();
            }
          });
          // Save all edits on button click
          saveEditsBtn.onclick = function() {
            // Blur all contenteditables to trigger their save
            document.querySelectorAll('[contenteditable="true"]').forEach(el => el.blur());
            editsPending = false;
            hideSaveBtn();
            // Cute feedback
            saveEditsBtn.innerHTML = '✔️';
            setTimeout(()=>{ saveEditsBtn.innerHTML = '💾'; }, 1200);
            // Exit edit mode after save
            setTimeout(()=>{ setEditMode(false); }, 1200);
          };
          // Show/hide save button on edit mode toggle
          function setEditMode(enabled) {
            editMode = enabled;
            if (enabled) {
              showSaveBtn();
              imgInput.style.display = 'none';
              document.querySelectorAll('.changeable-img').forEach(img => {
                img.style.cursor = 'pointer';
                img.title = 'Click to change image';
                img.onclick = function() {
                  currentImg = img;
                  imgInput.click();
                };
              });
              enableEditModeUI();
            } else {
              hideSaveBtn();
              imgInput.style.display = 'none';
              document.querySelectorAll('.changeable-img').forEach(img => {
                img.style.cursor = 'not-allowed';
                img.title = 'Image editing disabled';
                img.onclick = null;
              });
              disableEditModeUI();
            }
          }
          // --- Auto-update last updated date ---
          function updateLastUpdated() {
            const lastUpdated = document.querySelector('.last-updated');
            if (!lastUpdated) return;
            const now = new Date();
            const yyyy = now.getFullYear();
            const mm = String(now.getMonth()+1).padStart(2,'0');
            const dd = String(now.getDate()).padStart(2,'0');
            lastUpdated.textContent = `last updated: ${yyyy}/${mm}/${dd}`;
            // Save to Firebase if in edit mode
            if (typeof db !== 'undefined' && editMode) {
              db.ref('editable/last-updated').set(lastUpdated.textContent);
            }
          }
          // Update on every save
          if (saveEditsBtn) {
            saveEditsBtn.addEventListener('click', updateLastUpdated);
          }
          // Also update on page load if in edit mode
          if (editMode) updateLastUpdated();
          // --- BGM Toggle Button ---
          const bgmBtn = document.getElementById('bgmToggleBtn');
          const bgmYt = document.getElementById('bgm-yt');
          let bgmOn = true;
          bgmBtn.onclick = function() {
            bgmOn = !bgmOn;
            if (bgmOn) {
              bgmYt.src = "https://www.youtube.com/embed/7PvYu-1iEbY?autoplay=1&loop=1&playlist=7PvYu-1iEbY&controls=0&showinfo=0&modestbranding=1&rel=0&mute=0";
              bgmBtn.textContent = '🎵';
            } else {
              bgmYt.src = "";
              bgmBtn.textContent = '🔇';
            }
          };
        </script>
        <div class="round-buttons">
          <a class="round-btn" title="Instagram" href="https://www.instagram.com/fuwa_fuw4?igsh=MTBpOXp3dGNqOWx3aA==" target="_blank" rel="noopener noreferrer"><span>📷</span></a>
          <a class="round-btn" title="Twitter" href="https://twitter.com/" target="_blank" rel="noopener noreferrer"><span>🐦</span></a>
          <button class="round-btn" title="Recipes" onclick="document.querySelector('.featured-box').scrollIntoView({behavior: 'smooth'});"><span>🍞</span></button>
        </div>
        <div class="featured-box">
          <div class="icon">🍵</div>
          <div style="font-weight:bold; font-size:1.1rem;">Matcha Melonpan</div>
          <div style="color:#a67c52; font-size:0.98rem;">Soft & sweet Japanese bread with a matcha cookie crust</div>
          <div style="margin-top:8px; background:#fff; border-radius:10px; padding:10px 12px; box-shadow:0 1px 4px #ffe0ec; font-size:0.97rem;">
            <b>Ingredients:</b><br>
            <ul style="margin:6px 0 8px 18px;">
              <li>2 cups bread flour</li>
              <li>2 tbsp sugar</li>
              <li>1 tsp instant yeast</li>
              <li>1/2 cup milk</li>
              <li>2 tbsp butter</li>
              <li>1 egg</li>
              <li>Pinch of salt</li>
              <li>For cookie crust: 1/2 cup flour, 2 tbsp sugar, 2 tbsp butter, 1 tsp matcha powder</li>
            </ul>
            <b>Steps:</b><br>
            <ol style="margin:6px 0 8px 18px;">
              <li>Mix bread ingredients, knead, and let rise 1 hour.</li>
              <li>Mix cookie crust, roll flat, and cut circles.</li>
              <li>Shape dough into balls, cover with cookie crust, and score.</li>
              <li>Bake at 170°C (340°F) for 15-18 min. Enjoy with tea! 🍵</li>
            </ol>
            <span style="color:#d81b60; font-size:1.1em;">Kawaii tip: Draw a smiley face with chocolate for extra cuteness! (｡•ᴗ•｡)♡</span>
          </div>
        </div>
        <!-- More Recipes Section -->
        <div class="featured-box" style="background:#ffe0ec;">
          <div class="icon" style="background:#fffde7; color:#bfa100;">🍓</div>
          <div style="font-weight:bold; font-size:1.1rem;">Strawberry Shortcake</div>
          <div style="color:#a67c52; font-size:0.98rem;">Fluffy sponge, whipped cream, and fresh strawberries</div>
          <div style="margin-top:8px; background:#fff; border-radius:10px; padding:10px 12px; box-shadow:0 1px 4px #ffe0ec; font-size:0.97rem;">
            <b>Ingredients:</b><br>
            <ul style="margin:6px 0 8px 18px;">
              <li>3 eggs</li>
              <li>1/2 cup sugar</li>
              <li>3/4 cup cake flour</li>
              <li>2 tbsp milk</li>
              <li>1 cup heavy cream</li>
              <li>2 tbsp powdered sugar</li>
              <li>Fresh strawberries 🍓</li>
            </ul>
            <b>Steps:</b><br>
            <ol style="margin:6px 0 8px 18px;">
              <li>Whisk eggs & sugar until fluffy. Fold in flour & milk.</li>
              <li>Bake in a round pan at 170°C (340°F) for 20 min.</li>
              <li>Whip cream with sugar. Slice cake, layer with cream & strawberries.</li>
              <li>Decorate with extra strawberries and a cute mint leaf! (´｡• ᵕ •｡`)</li>
            </ol>
            <span style="color:#d81b60; font-size:1.1em;">Kawaii tip: Use heart-shaped strawberries for extra love! ♡</span>
          </div>
        </div>
        <div class="featured-box" style="background:#e0f7fa;">
          <div class="icon" style="background:#ffe0ec; color:#d81b60;">🍞</div>
          <div style="font-weight:bold; font-size:1.1rem;">Kawaii Milk Bread</div>
          <div style="color:#a67c52; font-size:0.98rem;">Super soft, fluffy, and perfect for cute sandwiches</div>
          <div style="margin-top:8px; background:#fff; border-radius:10px; padding:10px 12px; box-shadow:0 1px 4px #b2ebf2; font-size:0.97rem;">
            <b>Ingredients:</b><br>
            <ul style="margin:6px 0 8px 18px;">
              <li>2 1/2 cups bread flour</li>
              <li>3 tbsp sugar</li>
              <li>2 tsp instant yeast</li>
              <li>1/2 cup milk</li>
              <li>1/4 cup heavy cream</li>
              <li>1 egg</li>
              <li>2 tbsp butter</li>
              <li>Pinch of salt</li>
            </ul>
            <b>Steps:</b><br>
            <ol style="margin:6px 0 8px 18px;">
              <li>Mix all ingredients, knead until smooth, let rise 1 hour.</li>
              <li>Shape into a loaf or cute rolls. Let rise again 30 min.</li>
              <li>Bake at 175°C (350°F) for 25 min. Brush with butter!</li>
              <li>Draw faces with chocolate or jam for kawaii sandwiches! (≧◡≦)</li>
            </ol>
            <span style="color:#d81b60; font-size:1.1em;">Kawaii tip: Use cookie cutters for animal shapes!</span>
          </div>
        </div>
        <div class="featured-box" style="background:#f3e8ff;">
          <div class="icon" style="background:#fff0f6; color:#a67c52;">🥢</div>
          <div style="font-weight:bold; font-size:1.1rem;">Tahu Isi Sayuran Renyah</div>
          <div style="color:#a67c52; font-size:0.98rem;">Tahu goreng kopong berisi sayuran, super renyah dan gurih!</div>
          <div style="margin-top:8px; background:#fff; border-radius:10px; padding:10px 12px; box-shadow:0 1px 4px #f3e8ff; font-size:0.97rem;">
            <b>Bahan-bahan:</b><br>
            <ul style="margin:6px 0 8px 18px;">
              <li><b>A. Bahan Utama:</b></li>
              <li>10 buah tahu pong (tahu goreng kopong), belah satu sisi tanpa putus</li>
              <li>Minyak goreng secukupnya</li>
              <li><b>B. Bahan Isian Sayuran:</b></li>
              <li>100 gram wortel, serut halus</li>
              <li>100 gram kol, iris tipis</li>
              <li>50 gram tauge</li>
              <li>2 batang daun bawang, iris halus</li>
              <li>2 siung bawang putih, cincang halus</li>
              <li>1 sdm saus tiram (opsional)</li>
              <li>1 sdt garam</li>
              <li>1/2 sdt merica bubuk</li>
              <li>1/2 sdt kaldu bubuk (opsional)</li>
              <li>1 sdm minyak untuk menumis</li>
              <li><b>C. Bahan Adonan Pencelup (Crispy):</b></li>
              <li>150 gram tepung terigu serbaguna</li>
              <li>50 gram tepung beras</li>
              <li>1 sdt baking powder (opsional)</li>
              <li>1 sdt garam</li>
              <li>1/2 sdt merica bubuk</li>
              <li>1/2 sdt kaldu bubuk</li>
              <li>200-250 ml air</li>
            </ul>
            <b>Cara Membuat:</b><br>
            <ol style="margin:6px 0 8px 18px;">
              <li><b>Membuat Isian Tahu:</b> Tumis bawang putih hingga harum, masukkan wortel & kol, tumis hingga sedikit layu. Tambahkan tauge, bumbu, dan daun bawang. Angkat & dinginkan.</li>
              <li><b>Mengisi Tahu:</b> Isi tahu pong dengan tumisan sayur, jangan terlalu padat.</li>
              <li><b>Adonan Pencelup:</b> Campur semua bahan kering, tuang air sedikit demi sedikit hingga adonan licin dan pas kekentalannya.</li>
              <li><b>Menggoreng:</b> Celup tahu isi ke adonan, goreng dalam minyak panas hingga kuning keemasan dan renyah. Tiriskan.</li>
              <li><b>Penyajian:</b> Nikmati selagi hangat dengan cabai rawit atau saus favoritmu! 🌶️✨</li>
            </ol>
            <span style="color:#d81b60; font-size:1.1em;">Kawaii tip: Tambahkan irisan wortel bentuk bunga atau daun bawang bentuk hati di isian, makin lucu dan sehat! (✿◕‿◕✿)</span>
          </div>
        </div>
        <div class="featured-box" style="background:#fffde7;">
          <div class="icon" style="background:#ffe0ec; color:#d81b60;">🍜</div>
          <div style="font-weight:bold; font-size:1.1rem;">Mie Ayam Simpel dan Enak</div>
          <div style="color:#a67c52; font-size:0.98rem;">Mie ayam gurih dengan topping ayam dan kuah kaldu kaya rasa!</div>
          <div style="margin-top:8px; background:#fff; border-radius:10px; padding:10px 12px; box-shadow:0 1px 4px #ffe0ec; font-size:0.97rem;">
            <b>Bahan-bahan:</b><br>
            <ul style="margin:6px 0 8px 18px;">
              <li><b>A. Bahan Utama:</b></li>
              <li>500 gram mie telur basah</li>
              <li>200 gram sawi hijau, potong-potong</li>
              <li>Air untuk merebus mie dan sawi</li>
              <li>Bawang goreng & daun bawang untuk taburan (opsional)</li>
              <li><b>B. Bahan Topping Ayam:</b></li>
              <li>300 gram ayam fillet, potong dadu kecil</li>
              <li>2 lembar daun salam</li>
              <li>2 batang serai, memarkan</li>
              <li>1 sdt garam</li>
              <li>1 sdt gula pasir</li>
              <li>1 sdm kecap asin</li>
              <li>3 sdm kecap manis</li>
              <li>1/2 sdt merica bubuk</li>
              <li>1/2 sdt kaldu bubuk</li>
              <li>500 ml air</li>
              <li>2 sdm minyak goreng</li>
              <li><b>C. Bumbu Halus Topping Ayam:</b></li>
              <li>6 siung bawang merah</li>
              <li>4 siung bawang putih</li>
              <li>2 cm jahe</li>
              <li>2 cm kunyit, bakar sebentar (opsional)</li>
              <li>3 butir kemiri, sangrai</li>
              <li>1/2 sdt ketumbar bubuk</li>
              <li><b>D. Bahan Minyak Ayam:</b></li>
              <li>100 ml kulit/lemak ayam</li>
              <li>3 siung bawang putih, cincang kasar</li>
              <li>50 ml minyak sayur</li>
              <li><b>E. Bahan Kuah Kaldu:</b></li>
              <li>Tulang ayam</li>
              <li>1.5 liter air</li>
              <li>1 batang daun bawang (putihnya saja)</li>
              <li>1/2 sdt garam</li>
              <li>1/4 sdt merica bubuk</li>
              <li>1/2 sdt kaldu bubuk</li>
            </ul>
            <b>Cara Membuat:</b><br>
            <ol style="margin:6px 0 8px 18px;">
              <li><b>Minyak Ayam:</b> Masak kulit ayam hingga keluar minyak, angkat kulit. Goreng bawang putih hingga keemasan, campur dengan minyak ayam. Sisihkan.</li>
              <li><b>Topping Ayam:</b> Haluskan bumbu, tumis dengan daun salam & serai. Masukkan ayam, aduk rata. Tambahkan air, bumbu, kecap, masak hingga ayam empuk & kuah mengental.</li>
              <li><b>Kuah Kaldu:</b> Rebus tulang ayam, daun bawang, dan bumbu hingga harum. Saring kaldu.</li>
              <li><b>Mie & Sawi:</b> Rebus sawi & mie hingga matang, tiriskan.</li>
              <li><b>Penyajian:</b> Taruh minyak ayam di mangkuk, masukkan mie, aduk rata. Tambahkan sawi, topping ayam, siram kuah, taburi bawang goreng & daun bawang. Sajikan hangat! 🍜</li>
            </ol>
            <span style="color:#d81b60; font-size:1.1em;">Kawaii tip: Sajikan dengan mangkuk warna pastel & sendok lucu biar makin gemes! (ﾉ◕ヮ◕)ﾉ*:･ﾟ✧</span>
          </div>
        </div>
        <div class="featured-box" style="background:#e0f7fa;">
          <div class="icon" style="background:#ffe0ec; color:#bfa100;">🥕</div>
          <div style="font-weight:bold; font-size:1.1rem;">Bakwan Sayur Renyah dan Enak</div>
          <div style="color:#a67c52; font-size:0.98rem;">Bakwan sayur super renyah, cocok untuk camilan atau lauk!</div>
          <div style="margin-top:8px; background:#fff; border-radius:10px; padding:10px 12px; box-shadow:0 1px 4px #b2ebf2; font-size:0.97rem;">
            <b>Bahan-bahan:</b><br>
            <ul style="margin:6px 0 8px 18px;">
              <li><b>A. Bahan Utama:</b></li>
              <li>100 gram kol, iris tipis</li>
              <li>1 buah wortel, serut kasar</li>
              <li>50 gram tauge</li>
              <li>2 batang daun bawang, iris halus</li>
              <li>Minyak goreng secukupnya</li>
              <li><b>B. Bahan Adonan Tepung:</b></li>
              <li>150 gram tepung terigu serbaguna</li>
              <li>50 gram tepung beras</li>
              <li>1/2 sdt baking powder (opsional)</li>
              <li>1/2 sdt garam</li>
              <li>1/4 sdt merica bubuk</li>
              <li>1/2 sdt kaldu bubuk</li>
              <li>250-300 ml air es</li>
              <li><b>C. Bumbu Halus:</b></li>
              <li>3 siung bawang putih</li>
              <li>2 butir kemiri, sangrai</li>
              <li>1/2 sdt ketumbar bubuk</li>
            </ul>
            <b>Cara Membuat:</b><br>
            <ol style="margin:6px 0 8px 18px;">
              <li>Haluskan bumbu halus. Campur semua bahan kering, masukkan bumbu halus, tuang air es sedikit demi sedikit hingga adonan licin.</li>
              <li>Masukkan kol, wortel, tauge, dan daun bawang ke adonan. Aduk rata.</li>
              <li>Panaskan minyak banyak, goreng adonan bakwan satu sendok demi satu hingga kuning keemasan dan renyah. Tiriskan.</li>
              <li>Sajikan bakwan selagi hangat dengan cabai rawit atau saus favorit!</li>
            </ol>
            <span style="color:#d81b60; font-size:1.1em;">Kawaii tip: Bentuk bakwan bulat pipih dan sajikan di piring motif bunga biar makin imut! (｡♥‿♥｡)</span>
          </div>
        </div>
        <div class="featured-box" style="background:#ffe0ec;">
          <div class="icon" style="background:#e0f7fa; color:#d81b60;">🍜</div>
          <div style="font-weight:bold; font-size:1.1rem;">Biang Biang Noodles (Mie Biang Biang)</div>
          <div style="color:#a67c52; font-size:0.98rem;">Mie lebar khas Tiongkok dengan bumbu aromatik dan saus gurih, seru dan menantang untuk dibuat!</div>
          <div style="margin-top:8px; background:#fff; border-radius:10px; padding:10px 12px; box-shadow:0 1px 4px #ffe0ec; font-size:0.97rem;">
            <b>Bahan-bahan:</b><br>
            <ul style="margin:6px 0 8px 18px;">
              <li><b>A. Bahan Adonan Mie:</b></li>
              <li>300 gram tepung terigu protein tinggi</li>
              <li>160 ml air hangat</li>
              <li>1/2 sdt garam</li>
              <li>2 sdm minyak sayur (untuk merendam adonan)</li>
              <li><b>B. Bahan Bumbu Aromatik:</b></li>
              <li>2-3 siung bawang putih, cincang halus</li>
              <li>2-3 batang daun bawang, iris tipis (putih & hijau dipisah)</li>
              <li>1-2 sdm cabai bubuk kasar</li>
              <li>1/2 sdt Sichuan peppercorns (opsional)</li>
              <li>3-4 sdm minyak sayur (untuk disiram panas)</li>
              <li><b>C. Bahan Saus Pelengkap:</b></li>
              <li>2 sdm kecap asin</li>
              <li>1 sdm cuka hitam Tiongkok</li>
              <li>1 sdt gula pasir</li>
              <li>1/2 sdt garam (opsional)</li>
              <li>1/2 sdt kaldu bubuk (opsional)</li>
              <li>1-2 sdm air hangat</li>
              <li><b>D. Bahan Pelengkap Lainnya:</b></li>
              <li>Bok choy/sayuran hijau, rebus sebentar</li>
              <li>Telur rebus (opsional)</li>
              <li>Ayam/daging sapi cincang tumis (opsional)</li>
            </ul>
            <b>Cara Membuat:</b><br>
            <ol style="margin:6px 0 8px 18px;">
              <li><b>Membuat Adonan Mie:</b> Campur tepung & garam, tuang air hangat sedikit demi sedikit, uleni hingga halus & elastis. Bagi adonan, bulatkan, olesi minyak, tutup & diamkan 1-3 jam.</li>
              <li><b>Menyiapkan Bumbu & Saus:</b> Campur bawang putih, daun bawang putih, cabai bubuk, Sichuan peppercorns di mangkuk. Campur semua bahan saus pelengkap di mangkuk lain, aduk rata.</li>
              <li><b>Membentuk Mie:</b> Pipihkan adonan, tekan tengahnya dengan sumpit, tarik perlahan hingga panjang & lebar, lalu belah mengikuti garis sumpit.</li>
              <li><b>Merebus Mie & Penyajian:</b> Rebus mie hingga matang, tiriskan. Rebus juga sayuran. Tata saus di mangkuk, letakkan mie, sayur, dan topping. Taburi bumbu aromatik di atas mie.</li>
              <li>Panaskan minyak hingga berasap, siramkan ke bumbu aromatik (akan mendesis!). Taburi daun bawang hijau, aduk rata sebelum disantap.</li>
            </ol>
            <span style="color:#d81b60; font-size:1.1em;">Kawaii tip: Sajikan mie di mangkuk besar warna pastel, tambahkan telur rebus setengah matang & taburan wijen untuk tampilan super lucu! (ﾉ◕ヮ◕)ﾉ*:･ﾟ✧</span>
          </div>
        </div>
      </div>
      <div class="right-col">
        <div class="kawaii-fig">
          <img src="https://img.freepik.com/free-photo/cute-plush-toys-japanese-style_1150-11014.jpg?w=400&q=80" alt="Kawaii Plushies" class="changeable-img" id="kawaiiPlushieImg">
        </div>
        <div class="info-box">
          <div style="font-weight:bold; font-size:1.1rem;">Title Here</div>
          <div style="color:#a67c52; font-size:0.98rem;">sub here</div>
          <div class="warning">check xiu.carrd.co… before using as inspo</div>
          <div style="margin-top:8px; font-size:0.97rem;" id="infoBoxCustomText">This is a placeholder paragraph for extra info, notes, or a cute warning. You can customize this area as you like!</div>
        </div>
        <div class="kawaii-comments-box" style="background:#fff0f6; border-radius:18px; box-shadow:0 2px 8px #f8bbd0; padding:18px 18px 14px 18px; margin-bottom:24px; font-family:'Kosugi Maru', Arial, sans-serif;">
          <div style="font-weight:bold; color:#e57373; font-size:1.2rem; display:flex; align-items:center; gap:8px; margin-bottom:8px;">
            <span style="font-size:1.5rem;">💬</span> Kawaii Guestbook & Chat
          </div>
          <div id="commentsList" style="max-height:180px; overflow-y:auto; background:#fff; border-radius:10px; padding:10px 12px; margin-bottom:10px; box-shadow:0 1px 4px #ffe0ec; font-size:1rem;"></div>
          <form id="commentForm" style="display:flex; gap:8px; align-items:flex-end;">
            <input id="commentName" type="text" maxlength="16" placeholder="Your name" required style="flex:1; padding:6px 10px; border-radius:8px; border:1px solid #ffe0ec; font-size:1rem;">
            <input id="commentText" type="text" maxlength="120" placeholder="Leave a cute message... (｡•ᴗ•｡)♡" required style="flex:2; padding:6px 10px; border-radius:8px; border:1px solid #ffe0ec; font-size:1rem;">
            <button type="submit" style="background:#b2f2bb; color:#388e3c; border:none; border-radius:8px; padding:6px 16px; font-family:'Baloo 2',cursive; font-size:1rem; cursor:pointer; box-shadow:0 2px 8px #c8e6c9;">Send</button>
          </form>
        </div>
        <script>
          // --- Cute Comment/Chat Box ---
          const commentsList = document.getElementById('commentsList');
          const commentForm = document.getElementById('commentForm');
          const commentName = document.getElementById('commentName');
          const commentText = document.getElementById('commentText');
          // Use localStorage to persist comments for this browser
          function loadComments() {
            const comments = JSON.parse(localStorage.getItem('kawaiiComments')||'[]');
            commentsList.innerHTML = comments.map(c => `<div style='margin-bottom:8px;'><b style='color:#d81b60;'>${escapeHtml(c.name)}</b>: <span style='color:#7e5a3a;'>${escapeHtml(c.text)}</span> <span style='font-size:0.9em;'>${c.emo}</span></div>`).join('');
            commentsList.scrollTop = commentsList.scrollHeight;
          }
          function escapeHtml(str) {
            return str.replace(/[&<>"']/g, function(m) { return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]); });
          }
          commentForm.onsubmit = function(e) {
            e.preventDefault();
            const name = commentName.value.trim() || 'Anon';
            const text = commentText.value.trim();
            if (!text) return;
            const kawaiiEmotes = ['(｡•ᴗ•｡)♡','(≧◡≦)','(ﾉ◕ヮ◕)ﾉ*:･ﾟ✧','(✿◕‿◕✿)','(´｡• ᵕ •｡`)','(｡♥‿♥｡)','(っ˘ω˘ς )','(づ｡◕‿‿◕｡)づ','(๑˃ᴗ˂)ﻭ','(๑˃̵ᴗ˂̵)','(๑•ᴗ•๑)♡','(｡•̀ᴗ-)✧'];
            const emo = kawaiiEmotes[Math.floor(Math.random()*kawaiiEmotes.length)];
            const comments = JSON.parse(localStorage.getItem('kawaiiComments')||'[]');
            comments.push({name, text, emo});
            localStorage.setItem('kawaiiComments', JSON.stringify(comments));
            commentText.value = '';
            loadComments();
          };
          loadComments();
        </script>
      </div>
    </div>
  </div>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <script>
    // --- Firebase Setup ---
    // TODO: Replace with your own Firebase config!
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // --- Editable Content Helper ---
    function makeEditable(selector, key) {
      const el = document.querySelector(selector);
      if (!el) return;
      // Load from Firebase
      db.ref('editable/' + key).on('value', snap => {
        if (snap.exists()) el.innerHTML = snap.val();
      });
      // Enable editing in edit mode
      function enableEdit() {
        el.contentEditable = true;
        el.style.outline = '2px dashed #e57373';
        el.addEventListener('blur', saveEdit);
      }
      function disableEdit() {
        el.contentEditable = false;
        el.style.outline = '';
        el.removeEventListener('blur', saveEdit);
      }
      function saveEdit() {
        db.ref('editable/' + key).set(el.innerHTML);
      }
      // Patch edit mode activation
      if (!window._editableHooks) window._editableHooks = [];
      window._editableHooks.push({enable: enableEdit, disable: disableEdit});
    }

    // --- Mark all editable elements ---
    makeEditable('.main-desc', 'main-desc');
    makeEditable('.header-content .subheader', 'header-subheader');
    makeEditable('.header-content h1', 'header-title');
    makeEditable('.last-updated', 'last-updated');
    // Info box
    makeEditable('.info-box div[style*="font-weight:bold"]', 'info-title');
    makeEditable('.info-box div[style*="color:#a67c52"]', 'info-sub');
    makeEditable('.info-box .warning', 'info-warning');
    makeEditable('#infoBoxCustomText', 'info-custom');
    // All recipe boxes
    document.querySelectorAll('.featured-box').forEach((box, i) => {
      makeEditable(`.featured-box:nth-of-type(${i+1}) .icon`, `recipe${i}-icon`);
      makeEditable(`.featured-box:nth-of-type(${i+1}) div[style*="font-weight:bold"]`, `recipe${i}-title`);
      makeEditable(`.featured-box:nth-of-type(${i+1}) div[style*="color:#a67c52"]`, `recipe${i}-desc`);
      makeEditable(`.featured-box:nth-of-type(${i+1}) ul`, `recipe${i}-ingredients`);
      makeEditable(`.featured-box:nth-of-type(${i+1}) ol`, `recipe${i}-steps`);
      makeEditable(`.featured-box:nth-of-type(${i+1}) span[style*="color:#d81b60"]`, `recipe${i}-tip`);
    });

    // --- Edit Mode Patch for Editable Content ---
    function setEditMode(enabled) {
      editMode = enabled;
      if (enabled) {
        imgInput.style.display = 'none';
        document.querySelectorAll('.changeable-img').forEach(img => {
          img.style.cursor = 'pointer';
          img.title = 'Click to change image';
          img.onclick = function() {
            currentImg = img;
            imgInput.click();
          };
        });
        enableEditModeUI();
        // Enable all editable content
        if (window._editableHooks) window._editableHooks.forEach(h=>h.enable());
      } else {
        imgInput.style.display = 'none';
        document.querySelectorAll('.changeable-img').forEach(img => {
          img.style.cursor = 'not-allowed';
          img.title = 'Image editing disabled';
          img.onclick = null;
        });
        disableEditModeUI();
        // Disable all editable content
        if (window._editableHooks) window._editableHooks.forEach(h=>h.disable());
      }
    }
  </script>
</body>
</html>
